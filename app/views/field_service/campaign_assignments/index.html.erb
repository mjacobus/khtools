<% model = Db::PreachingCampaignAssignment %>


<div class="card">
  <div class="card-header">
    <%= @campaign.code %> <%= [@campaign.start_date, @campaign.end_date].compact.join('-') %>
  </div>

  <div class="card-body">
    <div class="card-title"><%= @campaign.name %></div>
    <div class="card-text"><%= @campaign.description %></div>

    <%= render FieldService::CampaignAssignments::AssignButtonsComponent.new(@campaign) %>
  </div>
</div>

<table class="table table-striped">
  <thead>
    <tr>
      <th scope="col"><%= attribute_name(:territory, model: model) %></th>
      <th scope="col"><%= attribute_name(:assignee, model: model) %></th>
      <th scope="col"><%= attribute_name(:assigned_at, model: model) %></th>
      <th scope="col"><%= attribute_name(:returned_at, model: model) %></th>
      <th scope="col"></th>
    </tr>
  </thead>
  <tbody>
    <% @campaign.each_assignment do |assignemnt| %>
      <tr>
        <td><%= assignemnt.territory.name %></td>
        <td><%= assignemnt.assignee&.name %></td>
        <td><%= assignemnt.assigned_at %></td>
        <td><%= assignemnt.returned_at %></td>
        <td>
          <%= link_to(t('app.links.edit'), edit_field_service_campaign_assignment_path(@campaign, assignemnt)) %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>
