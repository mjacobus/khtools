<%= render partial: '/breadcrumb', locals: {
  items: [
    ['Territórios', territories_path],
    [@territory.name, territory_path(@territory)],
    ['Telefones', territory_phones_path(@territory)],
    [@phone.number]
  ]
}
%>

<div class="row">
  <%= link_to("<< Anterior", territory_phone_path(@territory, @phone.previous), class: 'btn pull-left') %>
  <%= link_to("Próximo >>", territory_phone_path(@territory, @phone.next), class: 'btn pull-right') %>
</div>

<div class="btn-group pull-right">
  <button type="button" class="btn btn-success btn-block dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
    Adicionar
  </button>
  <div class="dropdown-menu">
    <%= link_to 'Contato', create_territory_phone_call_attempts_path(@territory, @phone, outcome: 'contacted'),
      class: 'dropdown-item btn',
      data: { method: :post }
    %>
    <%= link_to 'Não em casa', create_territory_phone_call_attempts_path(@territory, @phone, outcome: 'not_home'),
      class: 'dropdown-item btn',
      data: { method: :post }
    %>
    <%= link_to 'Telefone desligado', create_territory_phone_call_attempts_path(@territory, @phone, outcome: 'disconnected'),
      class: 'dropdown-item btn',
      data: { method: :post }
    %>
    <%= link_to 'Telefone inválido', create_territory_phone_call_attempts_path(@territory, @phone, outcome: 'unreachable'),
      class: 'dropdown-item btn',
      data: { method: :post }
    %>
    <div class="dropdown-divider"></div>
    <%= link_to 'Excluir telefone', territory_phone_path(@territory, @phone),
      class: 'dropdown-item text-danger btn',
      data: { method: :delete, confirm: 'Tem certeza que quer excluir este número?' }
    %>
  </div>
</div>

<h1><a href="tel:<%= @phone.casted_number.sanitized %>"><%= @phone.casted_number %></a></h1>

<% @phone.carrier_variations.each do |carrier, number| %>
  <p><small>Se sua operadora é</small> <%= carrier %>:<br><a href="tel:<%= number.sanitized %>"><strong><%= number %></strong></a></p>
<% end %>

<%= render partial: '/call_attempts/list', locals: { call_attempts: @phone.call_attempts } %>
